var openerplib={};openerplib.json_rpc=function(n,h,j,i){var k={jsonrpc:"2.0",params:j,id:Math.floor((Math.random()*1000000000)+1)};if(h){k.method=h}var l=new XMLHttpRequest();l.open("POST",n,true);l.setRequestHeader("Content-Type","application/json");l.onreadystatechange=function(){if(l.readyState!==4||!i){return}var a=l.getResponseHeader("Content-Type");if(l.status!==200){i("Offline",null)}else{if(a.indexOf("application/json")!==0){i('Expected JSON encoded response, found "'+a+'"',null)}else{var b=JSON.parse(this.responseText);i(b.error||null,b.result||null)}}};l.ontimeout=function(){i("Timeout",null)};try{l.send(JSON.stringify(k))}catch(m){i(m,null)}};openerplib.Service=function(d,e){var f=this;this.con=d;this.service=e;this.exec=function(a,c,b){f.con.send(f.service,a,c,b)}};openerplib.Model=function(e,f){var d=this;this.service=new openerplib.Service(e,"object");this.con=e;this.model=f;this.exec=function(c,b,a,h){d.service.exec("execute_kw",[e.database,e.user_id,e._password,d.model,c,b,a],h)}};openerplib.JsonRPCConnector=function(j,i,l,k,h){var g=this;this._url=j;this._url_jsonrpc=j+"/jsonrpc";this._password=k;this.login=l;this.database=i;this.user_id=h;this.session_id=null;this.user_context=null;this.authenticate=function(a){var b={db:g.database,login:g.login,password:g._password};var c=g._url+"/web/session/authenticate";openerplib.json_rpc(c,null,b,function(d,e){if(d===null){g.session_id=e.session_id;g.user_id=e.uid;g.user_context=e.user_context}if(a){a(d,e)}})};this.send=function(a,c,b,d){openerplib.json_rpc(g._url_jsonrpc,"call",{service:a,method:c,args:b},d)};this.get_service=function(a){return new openerplib.Service(g,a)};this.get_model=function(a){return new openerplib.Model(g,a)}};openerplib.get_connection=function(k,i,n,j,h,l){if(!n){n=8069}var m=k+":"+n.toString();switch(i){case"jsonrpcs":m="https://"+m;break;default:m="http://"+m;break}return new openerplib.JsonRPCConnector(m,j,h,l,null)};